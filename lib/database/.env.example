# Database Connection Pool Configuration Example
# Copy to .env and adjust values for your environment

# ==============================================
# DATABASE CONFIGURATION
# ==============================================

# PostgreSQL connection string
DATABASE_URL="postgresql://username:password@localhost:5432/candlefish_auth"

# PostgreSQL Connection Pool Settings
DB_POOL_SIZE=20                    # Number of connections in the pool (default: 10)
DB_CONNECTION_TIMEOUT=10000        # Connection timeout in milliseconds (default: 5000)
DB_POOL_TIMEOUT=15000             # Pool acquisition timeout in milliseconds (default: 10000)
DB_IDLE_TIMEOUT=120000            # Idle connection timeout in milliseconds (default: 60000)
DB_MAX_LIFETIME=600000            # Maximum connection lifetime in milliseconds (default: 300000)

# ==============================================
# REDIS CONFIGURATION
# ==============================================

# Redis connection (choose one method)
REDIS_URL="redis://localhost:6379"

# OR individual Redis settings
# REDIS_HOST="localhost"
# REDIS_PORT=6379
# REDIS_PASSWORD=""
# REDIS_DB=0

# Redis Connection Pool Settings
REDIS_MAX_CONNECTIONS=50          # Maximum connections in the pool (default: 20)
REDIS_MIN_CONNECTIONS=10          # Minimum connections to maintain (default: 5)
REDIS_IDLE_TIMEOUT=120000         # Idle connection timeout in milliseconds (default: 60000)
REDIS_CONNECTION_TIMEOUT=10000    # Connection timeout in milliseconds (default: 5000)
REDIS_COMMAND_TIMEOUT=10000       # Command execution timeout in milliseconds (default: 5000)
REDIS_MAX_RETRIES=5               # Maximum retry attempts (default: 3)
REDIS_RETRY_DELAY=2000            # Base retry delay in milliseconds (default: 1000)

# ==============================================
# ENVIRONMENT SETTINGS
# ==============================================

# Environment (affects default pool configurations)
NODE_ENV="production"             # development, staging, production

# ==============================================
# ENVIRONMENT-SPECIFIC RECOMMENDATIONS
# ==============================================

# DEVELOPMENT ENVIRONMENT
# - Lower connection limits to reduce resource usage
# - Shorter timeouts for faster feedback
# NODE_ENV=development
# DB_POOL_SIZE=5
# REDIS_MAX_CONNECTIONS=10

# STAGING ENVIRONMENT
# - Moderate connection limits
# - Production-like timeouts
# NODE_ENV=staging
# DB_POOL_SIZE=8
# REDIS_MAX_CONNECTIONS=15

# PRODUCTION ENVIRONMENT
# - Higher connection limits for scalability
# - Longer timeouts for stability
# NODE_ENV=production
# DB_POOL_SIZE=20
# REDIS_MAX_CONNECTIONS=50

# HIGH-PERFORMANCE ENVIRONMENT
# - Maximum connection limits
# - Optimized for throughput
# NODE_ENV=performance
# DB_POOL_SIZE=50
# REDIS_MAX_CONNECTIONS=100

# ==============================================
# MONITORING AND OBSERVABILITY
# ==============================================

# Enable detailed logging (development only)
# LOG_LEVEL=debug
# LOG_QUERIES=true
# LOG_POOL_METRICS=true
